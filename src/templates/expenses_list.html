{% extends "base.html" %}

{% block title %}Lista Wydatków{% endblock %}

{% block content %}
<h1>Lista Wydatków</h1>
<a href="/">Powrót do strony głównej</a>
<figure>
    <table role="grid">
        <thead>
            <tr>
                <th scope="col">Rozdział</th>
                <th scope="col">Nazwa zadania</th>
                <th scope="col">Potrzeby finansowe (PLN)</th>
            </tr>
        </thead>
        <tbody>
            {% if not expenses %}
            <tr>
                <td colspan="3">Brak wydatków</td>
            </tr>
            {% else %}
            {% for expense in expenses %}
            <tr>
                <td>{{ expense.chapter }}</td>
                <td>{{ expense.task_name }}</td>
                <td>{{ expense.financial_needs }}</td>
            </tr>
            {% endfor %}
            {% endif %}
        </tbody>
        {% if expenses_sum %}
        <tfoot>
            <tr>
                <td colspan="2">Suma</td>
                <td>{{ expenses_sum }}</td>
            </tr>
        </tfoot>
        {% endif %}
    </table>
</figure>
{% if not closed %}
<div class="grid">
    <div>
        <a href="/expenses/add" role="button" style="width: 100%;">Dodaj nowy wydatek</a>
    </div>
    <div>
        <form action="/expenses/close" method="POST" style="display: inline;">
            <button type="submit" class="secondary">Wyślij do akceptacji</button>
        </form>
    </div>
</div>
{% elif not is_open %}
<article>
    <header>Proces planowania nie został otwarty</header>
    Dyrektor (Chief) musi otworzyć proces planowania, zanim będzie można dodawać wydatki.
</article>
{% else %}
<article>
    <header>Status</header>
    Lista jest zamknięta. Nie można dodawać nowych wydatków.
</article>
{% endif %}

{% endblock %}